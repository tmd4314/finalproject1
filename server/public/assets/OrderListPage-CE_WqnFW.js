import{d as W,n,c as V,o as X,v as w,x as F,e as m,f as i,p as c,i as s,j as d,w as k,F as B,y as T,z as Z,h as ee,t as l,q as se,m as A,_ as te}from"./index-O14FyZ-J.js";const ae={class:"order-page-container"},le={class:"order-list-panel"},oe={class:"search-filter-area"},ne={class:"search-bar"},de={class:"filter-row"},re={class:"filter-item"},ue={class:"filter-item"},ie={class:"filter-item"},ce={class:"filter-item"},ve={class:"table-container"},pe={class:"order-table"},me={width:"40"},_e=["onClick"],fe={key:0,class:"no-data"},ge={class:"pagination-area"},ye={class:"page-info"},be={class:"page-controls"},he={key:0,class:"order-detail-panel"},Ve={class:"order-detail-section"},we={class:"order-detail-info"},ke={class:"info-row"},xe={class:"info-item"},Ce={class:"value"},Oe={class:"info-item"},Ae={class:"value"},Ue={class:"info-row"},Pe={class:"info-item"},De={class:"value"},Ne={class:"info-item"},Re={class:"value"},Se={class:"info-row"},qe={class:"info-item"},Le={class:"value"},Me={class:"info-item"},ze={class:"value"},Ie={class:"info-row"},Fe={class:"info-item"},Be={class:"value"},Te={class:"info-row full-width"},$e={class:"info-item"},je={class:"value"},Ee={class:"order-detail-section"},Ke={class:"item-table-wrapper"},Ye={class:"item-table"},Ge={key:1,class:"order-detail-panel"},He={class:"empty-state"},Je=W({__name:"OrderListPage",setup(Qe){const _=n(""),b=n([]),U=n(!1),v=n(1),p=n(10),u=n([]),r=n(null),f=n([]),P=n(!1),o=n({customer:"",businessNo:"",manager:"",status:""}),x=n([]),D=n([]),C=n([]),$=n(["진행중","완료","지연","대기","취소"]),g=V(()=>u.value.filter(t=>{const e=!_.value||t.order_id.includes(_.value)||t.customer_name.toLowerCase().includes(_.value.toLowerCase()),h=(!o.value.customer||t.customer_name===o.value.customer)&&(!o.value.status||t.status===o.value.status)&&(!o.value.manager||t.manager_name===o.value.manager);return e&&h})),j=V(()=>Math.ceil(g.value.length/p.value)),N=V(()=>(v.value-1)*p.value),R=V(()=>{const t=N.value,e=t+p.value;return g.value.slice(t,e)});X(async()=>{await E(),await K()});async function E(){try{P.value=!0;const t=await w.get("/api/orders");console.log("API 응답 데이터:",t.data),Array.isArray(t.data)?u.value=t.data:t.data&&Array.isArray(t.data.data)?u.value=t.data.data:t.data&&Array.isArray(t.data.orders)?u.value=t.data.orders:(console.error("예상치 못한 데이터 형식:",t.data),u.value=[]),u.value.length>0&&await S(u.value[0])}catch(t){console.error("주문 목록 로드 실패:",t),u.value=[{order_id:"ORD001",customer_name:"셀트리온",customer_id:"CUS001",order_date:"2024-01-15",delivery_date:"2024-01-20",status:"진행중",phone:"02-1234-5678",address:"인천광역시 연수구 아카데미로 23",manager_name:"홍길동",created_by:"김철수"},{order_id:"ORD002",customer_name:"한미약품",customer_id:"CUS002",order_date:"2024-01-16",delivery_date:"2024-01-22",status:"완료",phone:"02-9876-5432",address:"서울특별시 송파구 위례성대로 14",manager_name:"이영희",created_by:"박지민"}]}finally{P.value=!1}}async function K(){try{const t=await w.get("/api/customers/names");x.value=t.data;const e=await w.get("/api/employees/managers");C.value=e.data}catch(t){console.error("필터 옵션 로드 실패:",t),x.value=["셀트리온","한미약품","종근당","대웅제약","유한양행"],C.value=["홍길동","김철수","이영희","박지민"],D.value=["111-11-11111","222-22-22222","333-33-33333"]}}async function S(t){try{r.value=t;const e=await w.get(`/api/orders/${t.order_id}/details`);console.log("주문 상세 응답:",e.data),e.data&&(e.data.items?f.value=e.data.items:Array.isArray(e.data)?f.value=e.data:(console.log("예상치 못한 상세 데이터 구조:",e.data),f.value=[]))}catch(e){console.error("주문 상세 정보 로드 실패:",e),f.value=[{product_id:"PRD001",product_name:"타이레놀 500mg",product_code:"TYL-500",spec:"500mg x 10정",order_qty:100,stock_qty:50,note:"긴급 배송 요청"},{product_id:"PRD002",product_name:"아스피린 100mg",product_code:"ASP-100",spec:"100mg x 30정",order_qty:200,stock_qty:150,note:""}]}}function Y(){v.value=1}function G(t){t?b.value=R.value.map(e=>e.order_id):b.value=[]}function O(t){return t?new Date(t).toLocaleDateString("ko-KR").replace(/\. /g,"-").replace(/\./g,""):"-"}function q(t){return{진행중:"info",완료:"success",지연:"danger",대기:"warning",취소:"secondary"}[t]||"secondary"}return F(o,()=>{v.value=1},{deep:!0}),F(p,()=>{v.value=1}),(t,e)=>{const h=m("va-icon"),H=m("va-input"),J=m("va-button"),y=m("va-select"),L=m("va-checkbox"),M=m("va-chip"),Q=m("va-pagination");return i(),c("div",ae,[s("div",le,[e[20]||(e[20]=s("h1",{class:"page-title"},"주문 조회",-1)),s("div",oe,[s("div",ne,[d(H,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),placeholder:"주문번호, 거래처명으로 검색...",class:"search-input"},{prepend:k(()=>[d(h,{name:"search"})]),_:1},8,["modelValue"]),d(J,{onClick:Y},{default:k(()=>e[10]||(e[10]=[A("조회")])),_:1,__:[10]})]),s("div",de,[s("div",re,[e[11]||(e[11]=s("label",null,"거래처명",-1)),d(y,{modelValue:o.value.customer,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.customer=a),options:x.value,placeholder:"전체",clearable:""},null,8,["modelValue","options"])]),s("div",ue,[e[12]||(e[12]=s("label",null,"사업자번호",-1)),d(y,{modelValue:o.value.businessNo,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.businessNo=a),options:D.value,placeholder:"전체",clearable:""},null,8,["modelValue","options"])]),s("div",ie,[e[13]||(e[13]=s("label",null,"담당자",-1)),d(y,{modelValue:o.value.manager,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.manager=a),options:C.value,placeholder:"전체",clearable:""},null,8,["modelValue","options"])]),s("div",ce,[e[14]||(e[14]=s("label",null,"상태",-1)),d(y,{modelValue:o.value.status,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.status=a),options:$.value,placeholder:"전체",clearable:""},null,8,["modelValue","options"])])])]),s("div",ve,[s("table",pe,[s("thead",null,[s("tr",null,[s("th",me,[d(L,{modelValue:U.value,"onUpdate:modelValue":[e[5]||(e[5]=a=>U.value=a),G]},null,8,["modelValue"])]),e[15]||(e[15]=s("th",null,"주문번호",-1)),e[16]||(e[16]=s("th",null,"거래처명",-1)),e[17]||(e[17]=s("th",null,"주문일",-1)),e[18]||(e[18]=s("th",null,"상태",-1))])]),s("tbody",null,[(i(!0),c(B,null,T(R.value,a=>{var z;return i(),c("tr",{key:a.order_id,onClick:I=>S(a),class:Z({selected:((z=r.value)==null?void 0:z.order_id)===a.order_id})},[s("td",{onClick:e[7]||(e[7]=ee(()=>{},["stop"]))},[d(L,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=I=>b.value=I),"array-value":a.order_id},null,8,["modelValue","array-value"])]),s("td",null,l(a.order_id),1),s("td",null,l(a.customer_name),1),s("td",null,l(O(a.order_date)),1),s("td",null,[d(M,{color:q(a.status),size:"small"},{default:k(()=>[A(l(a.status),1)]),_:2},1032,["color"])])],10,_e)}),128))])]),g.value.length===0?(i(),c("div",fe," 검색 결과가 없습니다. ")):se("",!0)]),s("div",ge,[s("div",ye,l(N.value+1)+"-"+l(Math.min(v.value*p.value,g.value.length))+" of "+l(g.value.length),1),s("div",be,[e[19]||(e[19]=s("span",null,"Rows per page: ",-1)),d(y,{modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=a=>p.value=a),options:[10,20,50],class:"rows-select"},null,8,["modelValue"]),d(Q,{modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=a=>v.value=a),pages:j.value,"visible-pages":5,"buttons-preset":"secondary",rounded:"",gapped:"","border-color":"primary",class:"ml-3"},null,8,["modelValue","pages"])])])]),r.value?(i(),c("div",he,[e[32]||(e[32]=s("h2",{class:"detail-title"},"주문 상세 조회",-1)),s("div",Ve,[e[29]||(e[29]=s("h4",null,"[주문 기본 정보]",-1)),s("div",we,[s("div",ke,[s("div",xe,[e[21]||(e[21]=s("span",{class:"label"},"주문번호:",-1)),s("span",Ce,l(r.value.order_id),1),d(M,{color:q(r.value.status),size:"small",class:"ml-2"},{default:k(()=>[A(l(r.value.status),1)]),_:1},8,["color"])]),s("div",Oe,[e[22]||(e[22]=s("span",{class:"label"},"주문일:",-1)),s("span",Ae,l(O(r.value.order_date)),1)])]),s("div",Ue,[s("div",Pe,[e[23]||(e[23]=s("span",{class:"label"},"거래처:",-1)),s("span",De,l(r.value.customer_name),1)]),s("div",Ne,[e[24]||(e[24]=s("span",{class:"label"},"납기일:",-1)),s("span",Re,l(O(r.value.delivery_date)),1)])]),s("div",Se,[s("div",qe,[e[25]||(e[25]=s("span",{class:"label"},"연락처:",-1)),s("span",Le,l(r.value.phone),1)]),s("div",Me,[e[26]||(e[26]=s("span",{class:"label"},"작성자:",-1)),s("span",ze,l(r.value.created_by),1)])]),s("div",Ie,[s("div",Fe,[e[27]||(e[27]=s("span",{class:"label"},"담당자:",-1)),s("span",Be,l(r.value.manager_name),1)])]),s("div",Te,[s("div",$e,[e[28]||(e[28]=s("span",{class:"label"},"주소:",-1)),s("span",je,l(r.value.address),1)])])])]),s("div",Ee,[e[31]||(e[31]=s("h4",null,"[주문 품목 정보]",-1)),s("div",Ke,[s("table",Ye,[e[30]||(e[30]=s("thead",null,[s("tr",null,[s("th",null,"제품명"),s("th",null,"규격"),s("th",null,"제품코드"),s("th",null,"출하 필요량"),s("th",null,"현재 재고"),s("th",null,"비고")])],-1)),s("tbody",null,[(i(!0),c(B,null,T(f.value,a=>(i(),c("tr",{key:a.product_id},[s("td",null,l(a.product_name),1),s("td",null,l(a.spec),1),s("td",null,l(a.product_code),1),s("td",null,l(a.order_qty),1),s("td",null,l(a.stock_qty),1),s("td",null,l(a.note||"-"),1)]))),128))])])])])])):(i(),c("div",Ge,[s("div",He,[d(h,{name:"inventory_2",size:"48px",color:"secondary"}),e[33]||(e[33]=s("p",null,"주문을 선택하면 상세 정보가 표시됩니다.",-1))])]))])}}}),Xe=te(Je,[["__scopeId","data-v-9c02b1fe"]]);export{Xe as default};
//# sourceMappingURL=OrderListPage-CE_WqnFW.js.map
