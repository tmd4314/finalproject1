{"version":3,"file":"LotCheckPage-CbIg2gqN.js","sources":["../../../client/src/pages/material/LotCheckPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"material-inquiry-page\">\r\n    <h2 class=\"page-title\">자재 입고 조회</h2>\r\n\r\n    <!-- 검색 필터 -->\r\n    <div class=\"search-form\">\r\n      <va-input v-model=\"filters.material_code\" label=\"자재코드\" />\r\n      <va-input v-model=\"filters.material_name\" label=\"자재명\" />\r\n      <va-input v-model=\"filters.lot_number\" label=\"LOT번호\" />\r\n      <va-date-input\r\n        v-model=\"filters.received_date\"\r\n        label=\"입고일자\"\r\n        :manual-input=\"false\"\r\n        :clearable=\"true\"\r\n      />\r\n      <va-input v-model=\"filters.material_unit\" label=\"단위\" />\r\n      <va-input v-model=\"filters.material_cls\" label=\"분류\" />\r\n\r\n      <div class=\"button-group\">\r\n        <va-button @click=\"searchMaterials\">검색</va-button>\r\n        <va-button color=\"secondary\" @click=\"resetFilters\">초기화</va-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 입고 내역 테이블 -->\r\n    <va-data-table\r\n      :items=\"filteredList\"\r\n      :columns=\"columns\"\r\n      :per-page=\"10\"\r\n      :current-page.sync=\"page\"\r\n      track-by=\"lot_number\"\r\n    >\r\n      <template #cell(received_date)=\"{ row }\">\r\n        {{ formatToKST(row.source.received_date) }}\r\n      </template>\r\n    </va-data-table>\r\n\r\n    <va-pagination\r\n      v-model=\"page\"\r\n      :pages=\"Math.ceil(filteredList.length / 10)\"\r\n      class=\"mt-4\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport axios from 'axios'\r\nimport { ref, computed, onMounted } from 'vue'\r\n\r\ninterface MaterialLot {\r\n  lot_number: string\r\n  material_code: string\r\n  material_name: string\r\n  quantity: number\r\n  material_unit: string\r\n  material_cls: string\r\n  received_date: string\r\n}\r\n\r\nconst lotList = ref<MaterialLot[]>([])\r\nconst filteredList = ref<MaterialLot[]>([])\r\nconst page = ref(1)\r\n\r\nconst filters = ref({\r\n  material_code: '',\r\n  material_name: '',\r\n  lot_number: '',\r\n  received_date: null as Date | null,\r\n  material_unit: '',\r\n  material_cls: '',\r\n})\r\n\r\nconst columns = [\r\n  { key: 'lot_number', label: 'LOT번호' },\r\n  { key: 'material_code', label: '자재코드' },\r\n  { key: 'material_name', label: '자재명' },\r\n  { key: 'quantity', label: '입고 수량' },\r\n  { key: 'material_unit', label: '단위' },\r\n  { key: 'material_cls', label: '분류' },\r\n  { key: 'received_date', label: '입고일자' },\r\n]\r\n\r\nconst formatToKST = (isoDate: string): string => {\r\n  const date = new Date(isoDate)\r\n  const kst = new Date(date.getTime() + 9 * 60 * 60 * 1000)\r\n  const yyyy = kst.getFullYear()\r\n  const mm = String(kst.getMonth() + 1).padStart(2, '0')\r\n  const dd = String(kst.getDate()).padStart(2, '0')\r\n  const hh = String(kst.getHours()).padStart(2, '0')\r\n  const mi = String(kst.getMinutes()).padStart(2, '0')\r\n  return `${yyyy}-${mm}-${dd} ${hh}:${mi}`\r\n}\r\n\r\nconst isSameDate = (d1: Date, d2: Date): boolean => {\r\n  return (\r\n    d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate()\r\n  )\r\n}\r\n\r\nconst searchMaterials = () => {\r\n  const {\r\n    material_code,\r\n    material_name,\r\n    lot_number,\r\n    received_date,\r\n    material_unit,\r\n    material_cls,\r\n  } = filters.value\r\n\r\n  filteredList.value = lotList.value.filter((item) => {\r\n    const matchesCode = !material_code || item.material_code.includes(material_code)\r\n    const matchesName = !material_name || item.material_name.includes(material_name)\r\n    const matchesLot = !lot_number || item.lot_number.includes(lot_number)\r\n    const matchesDate =\r\n      !received_date || isSameDate(new Date(item.received_date), new Date(received_date))\r\n    const matchesUnit = !material_unit || item.material_unit.includes(material_unit)\r\n    const matchesCls = !material_cls || item.material_cls.includes(material_cls)\r\n\r\n    return (\r\n      matchesCode &&\r\n      matchesName &&\r\n      matchesLot &&\r\n      matchesDate &&\r\n      matchesUnit &&\r\n      matchesCls\r\n    )\r\n  })\r\n\r\n  page.value = 1\r\n}\r\n\r\nconst resetFilters = () => {\r\n  filters.value = {\r\n    material_code: '',\r\n    material_name: '',\r\n    lot_number: '',\r\n    received_date: null,\r\n    material_unit: '',\r\n    material_cls: '',\r\n  }\r\n  filteredList.value = [...lotList.value]\r\n  page.value = 1\r\n}\r\n\r\nconst fetchMaterialsLot = async () => {\r\n  try {\r\n    const res = await axios.get('/materialLotList')\r\n    lotList.value = res.data\r\n    filteredList.value = [...res.data]\r\n  } catch (err) {\r\n    console.error('❌ 입고 내역 조회 실패:', err)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchMaterialsLot()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.material-inquiry-page {\r\n  padding: 1.5rem;\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-title {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.search-form {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  column-gap: 20px;\r\n  row-gap: 16px;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.button-group {\r\n  grid-column: span 2;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n}\r\n</style>\r\n"],"names":["lotList","ref","filteredList","page","filters","columns","formatToKST","isoDate","date","kst","yyyy","mm","dd","hh","mi","isSameDate","d1","d2","searchMaterials","material_code","material_name","lot_number","received_date","material_unit","material_cls","item","matchesCode","matchesName","matchesLot","matchesDate","matchesUnit","matchesCls","resetFilters","fetchMaterialsLot","res","axios","err","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_createVNode","_component_va_input","$event","_component_va_date_input","_hoisted_3","_component_va_button","_component_va_data_table","_withCtx","row","_createTextVNode","_toDisplayString","_component_va_pagination"],"mappings":"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"}