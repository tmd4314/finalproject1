import{u as I,c as l,d as N,a as k,b as C,r as D,o as M,e as v,f as T,g as A,w as i,h as V,i as c,j as u,k as r,l as B,t as b,m as L,_ as F}from"./index-O14FyZ-J.js";const S=p=>{const a=I(p);return{formRef:a,isValid:l(()=>{var e;return((e=a.value)==null?void 0:e.isValid)||!1}),immediate:l(()=>{var e;return((e=a.value)==null?void 0:e.immediate)||!1}),isLoading:l(()=>{var e;return((e=a.value)==null?void 0:e.isLoading)||!1}),isDirty:l(()=>{var e;return((e=a.value)==null?void 0:e.isDirty)||!1}),isTouched:l(()=>{var e;return((e=a.value)==null?void 0:e.isTouched)||!1}),fields:l(()=>{var e;return((e=a.value)==null?void 0:e.fields)??[]}),fieldsNamed:l(()=>{var e;return((e=a.value)==null?void 0:e.fieldsNamed)??[]}),fieldNames:l(()=>{var e;return((e=a.value)==null?void 0:e.fieldNames)??[]}),formData:l(()=>{var e;return((e=a.value)==null?void 0:e.formData)??{}}),errorMessages:l(()=>{var e;return((e=a.value)==null?void 0:e.errorMessages)||[]}),errorMessagesNamed:l(()=>{var e;return((e=a.value)==null?void 0:e.errorMessagesNamed)||{}}),validate:()=>{var e;return(e=a.value)==null?void 0:e.validate()},validateAsync:()=>{var e;return(e=a.value)==null?void 0:e.validateAsync()},reset:()=>{var e;return(e=a.value)==null?void 0:e.reset()},resetValidation:()=>{var e;return(e=a.value)==null?void 0:e.resetValidation()},focus:()=>{var e;return(e=a.value)==null?void 0:e.focus()},focusInvalidField:()=>{var e;return(e=a.value)==null?void 0:e.focusInvalidField()}}},j={class:"password-toggle"},q={class:"flex justify-center mt-4 mb-3"},R={class:"flex justify-center"},K=N({__name:"Login",setup(p){const{validate:a}=S("form"),e=k(),o=C(),_={required:t=>!!t||"필수 입력 항목입니다."},s=D({employee_id:"",password:""}),h=()=>{e.push({name:"dashboard"})},m=async()=>{if(!await a())return;console.log("로그인 시도:",s.employee_id);const t=await o.login(s.employee_id,s.password);t.success?(console.log("로그인 성공, 대시보드로 이동"),setTimeout(()=>{e.push({name:"dashboard"})},2e3)):(console.log("로그인 실패:",t.message),s.password="")};return M(async()=>{console.log("Login.vue 마운트됨"),await o.initialize(),console.log("Login.vue - authStore 초기화 완료"),console.log("Login.vue - 현재 로그인 상태:",o.isLoggedIn),o.isLoggedIn&&(console.log("이미 로그인되어 있음, 대시보드로 이동"),e.push({name:"dashboard"}))}),(t,n)=>{const f=v("VaInput"),w=v("VaValue"),g=v("VaButton"),x=v("VaForm");return T(),A(x,{ref:"form",onSubmit:V(m,["prevent"])},{default:i(()=>[n[3]||(n[3]=c("h1",{class:"font-semibold text-4xl mb-4"},"로그인",-1)),u(f,{modelValue:s.employee_id,"onUpdate:modelValue":n[0]||(n[0]=d=>s.employee_id=d),rules:[_.required],class:"mb-4",label:"사원아이디",placeholder:"사원아이디를 입력하세요",loading:r(o).isLoading,disabled:r(o).isLoading},null,8,["modelValue","rules","loading","disabled"]),u(w,{"default-value":!1},{default:i(d=>[u(f,{modelValue:s.password,"onUpdate:modelValue":n[1]||(n[1]=y=>s.password=y),rules:[_.required],type:d.value?"text":"password",class:"mb-4",label:"비밀번호",placeholder:"비밀번호를 입력하세요",loading:r(o).isLoading,disabled:r(o).isLoading,onKeyup:B(m,["enter"]),onClickAppendInner:V(y=>d.value=!d.value,["stop"])},{appendInner:i(()=>[c("span",j,b(d.value?"숨기기":"보기"),1)]),_:2},1032,["modelValue","rules","type","loading","disabled","onClickAppendInner"])]),_:1}),c("div",q,[u(g,{class:"w-full",loading:r(o).isLoading,disabled:r(o).isLoading||!s.employee_id||!s.password,onClick:m},{default:i(()=>[L(b(r(o).isLoading?"로그인 중...":"로그인"),1)]),_:1},8,["loading","disabled"])]),c("div",R,[u(g,{preset:"secondary",color:"secondary",class:"w-full",disabled:r(o).isLoading,onClick:h},{default:i(()=>n[2]||(n[2]=[L(" 대시보드로 돌아가기 ")])),_:1,__:[2]},8,["disabled"])])]),_:1,__:[3]},512)}}}),z=F(K,[["__scopeId","data-v-7d9cbca4"]]);export{z as default};
//# sourceMappingURL=Login-CnbosrBq.js.map
