import{d as B,c as D,n as m,e as d,f as N,g as S,w as u,i,j as o,m as v,v as j}from"./index-O14FyZ-J.js";const I={class:"va-mb-4 va-row va-gap-2"},P={class:"va-mt-4 va-row va-justify-end va-gap-2"},z=B({__name:"ProductSearchModal",props:{visible:{type:Boolean}},emits:["update:visible","apply"],setup(_,{emit:b}){const f=_,c=b,r=D({get:()=>f.visible,set:t=>c("update:visible",t)}),a=m({product_name:"",product_stand:"",result_id:""}),n=m([]),V=[{key:"select",label:"선택",width:60},{key:"work_order_no",label:"작업지시 코드"},{key:"product_name",label:"제품명"},{key:"product_stand",label:"제품규격"},{key:"result_id",label:"실적 ID"}],y=async()=>{try{const t=await j.get("/prodResult");n.value=t.data.filter(e=>(!a.value.product_name||e.product_name.includes(a.value.product_name))&&(!a.value.product_stand||e.product_stand.includes(a.value.product_stand))).map(e=>({...e,selected:!1}))}catch{alert("제품 목록 조회 실패")}},k=(t,e)=>{n.value.forEach(s=>s.selected=!1),e&&(t.selected=!0)},w=()=>{const t=n.value.find(e=>e.selected);t?(c("apply",t),r.value=!1):alert("선택된 제품이 없습니다.")};return(t,e)=>{const s=d("va-input"),p=d("va-button"),x=d("va-checkbox"),g=d("va-data-table"),U=d("va-modal");return N(),S(U,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value=l),title:"제품 검색",size:"large"},{default:u(()=>[i("div",I,[o(s,{modelValue:a.value.product_name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.product_name=l),label:"제품명"},null,8,["modelValue"]),o(s,{modelValue:a.value.product_stand,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.product_stand=l),label:"제품규격"},null,8,["modelValue"]),o(s,{modelValue:a.value.result_id,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.result_id=l),label:"실적ID"},null,8,["modelValue"]),o(p,{onClick:y},{default:u(()=>e[4]||(e[4]=[v("검색")])),_:1,__:[4]})]),o(g,{items:n.value,columns:V,"track-by":"product_code"},{"cell(select)":u(({row:l})=>[o(x,{"model-value":l.rowData.selected,"onUpdate:modelValue":C=>k(l.rowData,C)},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["items"]),i("div",P,[o(p,{color:"primary",onClick:w},{default:u(()=>e[5]||(e[5]=[v("선택")])),_:1,__:[5]})])]),_:1},8,["modelValue"])}}});export{z as _};
//# sourceMappingURL=ProductSearchModal.vue_vue_type_script_setup_true_lang-DtzYrCkK.js.map
